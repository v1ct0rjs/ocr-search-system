<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Buscador OCR</title>
  <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

<header>
  <h1>üîé Buscador Inteligente de Documentos</h1>
  <p>Encuentra texto dentro de tus PDFs indexados por OCR</p>
</header>

<div class="search-container">
  <div class="search-box">
    <input type="text" id="q" placeholder="Escribe aqu√≠ lo que quieres buscar...">
    <button onclick="buscar()">Buscar</button>
  </div>
</div>

<div id="results"></div>

<footer>
  Sistema OCR + Elasticsearch + FastAPI
</footer>

<script>
async function buscar() {
  const q = document.getElementById("q").value.trim();
  if (!q) return;

  try {
    const res = await fetch(`http://localhost:8000/search?q=${encodeURIComponent(q)}`);
    const data = await res.json(); // ‚Üê La API devuelve un ARRAY

    const container = document.getElementById("results");
    container.innerHTML = "";

    if (!Array.isArray(data) || data.length === 0) {
      container.innerHTML = "<p class='no-results'>No se encontraron resultados</p>";
      return;
    }

    data.forEach(r => {
      const div = document.createElement("div");
      div.className = "result";
      div.innerHTML = `
        <div class="filename">${r.filename}</div>
        <div class="score">Relevancia: ${r.score.toFixed(2)}</div>
        <div class="snippet">Documento encontrado en el √≠ndice OCR</div>
      `;
      container.appendChild(div);
    });

  } catch (err) {
    console.error("Error en la b√∫squeda:", err);
    document.getElementById("results").innerHTML =
      "<p class='no-results'>Error conectando con la API</p>";
  }
}
</script>

</body>
</html>